<html lang="en-gb">

<body><h1>Hello World!</h1>

<label for="species">Choose a species:</label>

<select id="species">
    <option>Tree</option>
    <option>Common Carder</option>
    <option>Shrill Carder</option>
</select>
<button id="ClickBeeButton">Click bee</button>

<h2>Number of bees: <span id="beeCount"></span></h2>


<script type="text/javascript">

    const sightingsStorageKey = "sightings";
    const button = document.getElementById("ClickBeeButton");
    const displayCount = document.getElementById("beeCount");
    const speciesSelection = document.getElementById("species");

    function getSightings() {
        let sightings = localStorage.getItem(sightingsStorageKey);
        if (!sightings) {
            return [];
        } else {
            return JSON.parse(sightings);
        }
    }

    function updateCount() {
        let sightings = getSightings();
        const result = sightings.reduce((speciesCount, sighting) => {
            const currentSpeciesCount = speciesCount[sighting.species];
            if (!currentSpeciesCount) {
                speciesCount[sighting.species] = 1;
            } else {
                speciesCount[sighting.species]++;
            }
            return speciesCount
        }, {});
        console.log(result)
        displayCount.innerText = JSON.stringify(result);
    }

    updateCount();

    button.addEventListener("click", () => {
        console.log("BUZZZZZZZ")

        let sightings = getSightings();
        sightings.push({species:speciesSelection.value})
        localStorage.setItem(sightingsStorageKey, JSON.stringify(sightings));
        updateCount();
    })
</script>
</body>
</html>